openapi: 3.0.3
info:
  title: Campus Lost & Found API
  version: 1.0.0
servers:
  - url: http://localhost:3000
components:
  securitySchemes:
    bearerAuth: { type: http, scheme: bearer, bearerFormat: JWT }
paths:
  /api/health:
    get: { summary: Health check, responses: { '200': { description: OK } } }
  /api/auth/register:
    post:
      summary: Register
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [username, password, name]
              properties:
                username: { type: string }
                password: { type: string, format: password }
                name: { type: string }
                faculty: { type: string }
                phone: { type: string }
                role: { type: string, enum: [STUDENT, TEACHER, ADMIN] }
      responses: { '201': { description: Created } }
  /api/auth/login:
    post:
      summary: Login â†’ JWT
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [username, password]
              properties:
                username: { type: string }
                password: { type: string, format: password }
      responses: { '200': { description: OK } }
  /api/me:
    get: { summary: Current user, security: [ { bearerAuth: [] } ], responses: { '200': { description: OK } } }
  /api/items:
    get: { summary: List items, responses: { '200': { description: OK } } }
    post:
      summary: Create item
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [type, title]
              properties:
                type: { type: string, enum: [LOST, FOUND] }
                title: { type: string }
                description: { type: string }
                category: { type: string }
                locationFound: { type: string }
                dateFound: { type: string, format: date-time }
                imageUrl: { type: string }
      responses: { '201': { description: Created } }
  /api/items/{id}:
    parameters:
      - in: path
        name: id
        required: true
        schema: { type: string }
    get: { summary: Get item, responses: { '200': { description: OK }, '404': { description: Not Found } } }
    put:
      summary: Update item
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type: { type: string, enum: [LOST, FOUND] }
                title: { type: string }
                description: { type: string }
                category: { type: string }
                locationFound: { type: string }
                dateFound: { type: string, format: date-time }
                imageUrl: { type: string }
      responses: { '200': { description: Updated } }
    delete: { summary: Delete item, security: [ { bearerAuth: [] } ], responses: { '200': { description: Deleted } } }
  /api/claims:
    get: { summary: List claims, security: [ { bearerAuth: [] } ], responses: { '200': { description: OK } } }
    post:
      summary: Create claim
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [itemId, message]
              properties:
                itemId: { type: string }
                message: { type: string }
                contact: { type: string }
      responses: { '201': { description: Created } }
  /api/claims/{id}:
    parameters:
      - in: path
        name: id
        required: true
        schema: { type: string }
    put:
      summary: Update claim status
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status: { type: string, enum: [PENDING, APPROVED, REJECTED] }
      responses: { '200': { description: Updated } }
